/* ===== Dark tokens (scoped) ===== */
.income-expenses-container[data-theme="dark"],
.income-expenses-container{
  --bg-0:#0B0F14; --bg-1:#0F1620; --bg-2:#131B26;
  --border:#1F2A37;
  --text-1:#E5E7EB; --text-2:#A3B3C2; --text-muted:#7A8A9B;
  --primary:#60A5FA; --primary-strong:#3B82F6; --accent:#22D3EE;
  --success:#10B981; --warning:#F59E0B; --danger:#F43F5E;

  --radius:12px; --radius-lg:20px;
  --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px;
  --space-5:24px; --space-6:32px; --space-7:48px; --space-8:64px;
}

/* Page wrap */
.income-expenses-container{
  max-width: 1280px;
  margin: 0 auto;
  padding: var(--space-7) var(--space-4) var(--space-8);
  color: var(--text-1);
  font-family: Inter, "Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  display: grid;
  gap: var(--space-6);
  background:
    radial-gradient(1000px 700px at 90% -10%, rgba(96,165,250,0.10), transparent 60%),
    radial-gradient(800px 600px at -10% 30%, rgba(34,211,238,0.08), transparent 55%),
    var(--bg-0);
}

/* Reusable card */
.card{
  border: 1px solid #223043;
  background: #111922;
  border-radius: var(--radius-lg);
  box-shadow: 0 1px 0 rgba(255,255,255,0.02), 0 16px 40px rgba(0,0,0,0.45);
  padding: clamp(16px, 3vw, 24px);
}

/* Date picker row */
.ie-datepicker{
  display: flex; align-items: center; flex-wrap: wrap; gap: var(--space-3);
  border: 1px solid #223043; background: #101720; border-radius: var(--radius);
  padding: var(--space-3) var(--space-4);
}
.ie-datepicker label{ color: var(--text-2); }
.ie-datepicker input[type="date"]{
  height: 40px; color: var(--text-1); background: #0F1620;
  border: 1px solid #243041; border-radius: 10px; padding: 0 var(--space-3);
}
.ie-today-btn{
  height: 40px; padding: 0 var(--space-4);
  border-radius: 999px; border: 1px solid #2A394C; background: #111922; color: var(--text-1);
  font-weight: 600; cursor: pointer;
}
.ie-today-btn:disabled{ opacity: .6; cursor: default; }
.ie-today-btn:hover:enabled{ background: #172131; border-color: var(--primary-strong); }

.ie-source-tag{ color: var(--text-2); margin-left: auto; }

/* Controls */
.ie-controls{ display: grid; gap: var(--space-5); }
.ie-control-grid{
  display: grid; gap: var(--space-4);
  grid-template-columns: repeat(4, minmax(0, 1fr));
}
@media (max-width: 1100px){
  .ie-control-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 640px){
  .ie-control-grid{ grid-template-columns: 1fr; }
}
.ie-control{ display: grid; gap: var(--space-2); }
.ie-control label{ color: var(--text-2); font-size: .95rem; }
.ie-control input{
  height: 44px; border-radius: var(--radius);
  border: 1px solid #243041; background: #0F1620; color: var(--text-1);
  padding: 0 var(--space-4);
  outline: none; transition: box-shadow .12s ease, border-color .12s ease;
}
.ie-control input:focus{ border-color: #3B82F6; box-shadow: 0 0 0 3px rgba(96,165,250,.25); }

/* Save actions */
.ie-actions{ display: flex; align-items: center; gap: var(--space-3); }
.ie-save-btn{
  height: 44px; padding: 0 var(--space-5);
  border-radius: 999px; border: 1px solid transparent;
  background: var(--primary); color: #0B0F14; font-weight: 700; cursor: pointer;
  box-shadow: 0 1px 0 rgba(255,255,255,.06), 0 10px 26px rgba(96,165,250,.28);
}
.ie-save-btn:disabled{ opacity: .7; cursor: not-allowed; }
.ie-save-btn:hover:enabled{ background: var(--primary-strong); }
.ie-save-msg{ color: var(--success); font-weight: 600; }
.ie-error{ color: #ffb4be; }

/* Sections */
.ie-section h2{
  margin: 0 0 var(--space-4);
  font-size: 1.2rem; font-weight: 700; letter-spacing: 0.01em;
}
.ie-table-row{
  display: grid; gap: var(--space-4);
  grid-template-columns: 2fr 4fr 3fr;
}
@media (max-width: 1100px){
  .ie-table-row{ grid-template-columns: 1fr; }
}

/* Labels column */
.ie-labels{
  display: grid; gap: var(--space-2);
  color: var(--text-2);
}
.ie-labels .bold{ color: var(--text-1); font-weight: 700; }

/* Bars column */
.ie-bars{
  display: grid; gap: var(--space-2);
  align-content: start;
}

/* ==== New bar system: rail is full width, fill uses ::before, value chip follows edge ==== */
.ie-bar{
  --w: 0%;
  position: relative;
  height: 36px;
  border-radius: 10px;
  background: #0F2338;
  border: 1px solid #254061;
  overflow: visible; /* allow label to nudge out slightly */
}

/* Filled part driven by the --w var coming from JSX */
.ie-bar::before{
  content: "";
  position: absolute; inset: 0;
  width: var(--w);
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(96,165,250,.35), rgba(34,211,238,.25));
  box-shadow: inset 0 0 0 1px rgba(59,130,246,.25);
  transition: width .25s ease;
}

/* Value chip that sits at the fill edge, but never too far left/right */
.ie-bar > span{
  position: absolute;
  top: 50%;
  left: clamp(28px, var(--w), calc(100% - 8px));
  transform: translate(-8px, -50%);
  padding: 4px 8px;
  border-radius: 999px;
  background: #0F1620;
  border: 1px solid #2A394C;
  color: #E5E7EB;
  font-weight: 600;
  line-height: 1;
  pointer-events: none;
  white-space: nowrap;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* Totals column */
.ie-totals{
  display: grid; gap: var(--space-3);
}
.ie-total-box{
  border: 1px solid #243041; background: #0F1620;
  border-radius: 12px; padding: var(--space-3) var(--space-4);
  display: flex; align-items: center; justify-content: space-between;
}
.ie-total-box span:first-child{ color: var(--text-2); }
.ie-total-box span:last-child{ font-weight: 700; }

/* Main total rows */
.ie-main-total{
  margin-top: var(--space-4);
  display: flex; align-items: center; justify-content: space-between;
  border-top: 1px dashed #2a3a4f; padding-top: var(--space-3);
}
.ie-main-total.expense span:last-child{ color: #ffccd3; }

/* Profit */
.ie-profit-section h2{ margin: 0 0 var(--space-3); }
.ie-profit-box{
  border: 1px solid #2B3B52; background: #0F1E2F;
  border-radius: 16px; padding: var(--space-5);
  font-size: clamp(1.1rem, 2.2vw, 1.4rem); font-weight: 800; letter-spacing: 0.02em;
  display: inline-flex; align-items: center; gap: 10px;
  box-shadow: 0 1px 0 rgba(255,255,255,.02), 0 16px 40px rgba(0,0,0,.45);
}

/* Links + Loading */
.ie-links{ color: var(--text-2); }
.ie-links a{ color: var(--primary); text-decoration: none; }
.ie-links a:hover{ text-decoration: underline; }

.ie-loading{ color: var(--text-2); font-style: italic; }
